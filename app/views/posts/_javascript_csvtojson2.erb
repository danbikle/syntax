<code class='javascript'>/* ~/aspy/bin/gspcCSV2json.js

ref:
https://www.npmjs.com/package/csvtojson
https://www.npmjs.com/package/jsonfile

Demo:
cd ~/aspy/
node bin/gspcCSV2json.js
*/

//Converter Class 
var fs         = require("fs");
var Converter  = require("csvtojson").Converter;
var fileStream = fs.createReadStream("csv/gspc.csv");

//new converter instance 
var converter = new Converter({constructResult:true});

//end_parsed will be emitted once parsing finished 
converter.on("end_parsed", function (jsonObj) {
  var jsonfile = require('jsonfile');
  var file     = 'json/gspc.json';
  jsonfile.writeFile(file, jsonObj, function (err) { console.error(err); });});

//read from file 
fileStream.pipe(converter);
</code>
