<code class='bash'>
su
cd ~root
yum groupinstall  'Development Tools'
yum install openssl-devel
wget https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-6-x86_64/pgdg-centos95-9.5-2.noarch.rpm
yum install pgdg-centos95-9.5-2.noarch.rpm 
yum list postgresql95*
yum install postgresql95 postgresql95-server postgresql95-libs postgresql95-devel
/etc/init.d/postgresql-9.5 initdb
echo 'export PATH=/usr/pgsql-9.5/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin' >> ~postgres/.bash_profile

cd /var/lib/pgsql/9.5/data/
cp pg_hba.conf pg_hba.conf.bak
chown postgres pg_hba.conf.bak

sed -i '/^host/s/ident/md5/' pg_hba.conf
sed -i '/128/s/md5/ident/'   pg_hba.conf

diff pg_hba.conf.bak pg_hba.conf

/etc/init.d/postgresql-9.5 start
/etc/init.d/postgresql-9.5 reload

su - postgres
psql
alter user postgres password 'hello';
\q

psql -U postgres -h localhost
\q


# Next I install jdk 1.8 which I get from oracle.com
# The section below assumes the jdk from oracle is in ~root/
su
cd ~root
mkdir -p /opt/downloads
ls -la jdk-8u92-linux-x64.tar.gz
cp     jdk-8u92-linux-x64.tar.gz /opt/downloads
chown -R postgres /opt/downloads
su - postgres
cd /opt/downloads
tar zxf jdk-8u92-linux-x64.tar.gz
su
mv jdk1.8.0_92 /opt
cd /opt
ln -s jdk1.8.0_92 jdk
echo 'export JAVA_HOME=/opt/jdk'            >> ~root/.bashrc
echo 'export PATH=${JAVA_HOME}/bin:${PATH}' >> ~root/.bashrc
bash
javac              -version
/opt/jdk/bin/javac -version

echo 'export JAVA_HOME=/opt/jdk'            >> ~postgres/.bash_profile
echo 'export PATH=${JAVA_HOME}/bin:${PATH}' >> ~postgres/.bash_profile

su - postgres

javac              -version
/opt/jdk/bin/javac -version

# Next, I installed maven:

su
cd /opt/downloads
wget http://www-us.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.tar.gz
cd /usr/local
tar zxf /opt/downloads/apache-maven-3.3.9-bin.tar.gz 
ln -s apache-maven-3.3.9 maven
echo 'export PATH=/usr/local/maven/bin:$PATH' >> ~postgres/.bash_profile
su - postgres
which mvn
mvn -version

# Next, I cloned a repo:
su - postgres
cd /opt/downloads
git clone https://github.com/tada/pljava
cd pljava
git checkout V1_5_0
git checkout -b branch150

# I used maven:
mvn clean install
# I should see this at the end:
# [INFO] BUILD SUCCESS

# I install pljava:
find . -name pljava-pg9.5-amd64-Linux-gpp.jar -print
# I should see:
#         ./pljava-packaging/target/pljava-pg9.5-amd64-Linux-gpp.jar
# So I use it:
su
java -jar ./pljava-packaging/target/pljava-pg9.5-amd64-Linux-gpp.jar

su - postgres

# I look for libjvm.so
find /opt -name libjvm.so -print
# I should see:
# /opt/jdk1.8.0_92/jre/lib/amd64/server/libjvm.so

# I enhance the database
psql

SET pljava.libjvm_location TO '/opt/jdk1.8.0_92/jre/lib/amd64/server/libjvm.so';
CREATE EXTENSION pljava;
\dx

# I test PL/Java:
create function java_max(a integer, b integer)
returns integer
language java volatile
as 'java.lang.Math.max(int, int)'
;
select java_max(2, 4);

# The last call should return 4

</code>
